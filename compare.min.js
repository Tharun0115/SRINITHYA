const COMPARE_STORAGE_KEY="srinithya_compare_storage";function getStorageData(){try{const e=JSON.parse(localStorage.getItem(COMPARE_STORAGE_KEY));return e&&"object"==typeof e&&!Array.isArray(e)?e:{}}catch(e){return{}}}function getCompareList(e){if(!e)return[];const t=getStorageData();return Array.isArray(t[e])?t[e]:[]}function saveCompareList(e,t){if(!e)return;const o=getStorageData();o[e]=t,localStorage.setItem(COMPARE_STORAGE_KEY,JSON.stringify(o))}function getCurrentPageCategory(){const e=document.querySelector("[data-category]");return e?e.dataset.category:null}document.addEventListener("DOMContentLoaded",()=>{updateCompareBar()}),window.toggleCompare=function(e){const t=e.closest("[data-model]");if(!t)return;const o=t.dataset.model;if(!o)return;const a=t.dataset.category||getCurrentPageCategory();if(!a)return;let r=getCompareList(a);if(e.checked){if(r.length>=4)return alert("You can only compare up to 4 models at a time."),void(e.checked=!1);const n={Model:o,Category:a},s=t.querySelector("img");s&&"false"!==t.dataset.previewImage&&(n.Image=s.src);for(const e in t.dataset){if("model"===e||"previewImage"===e||"category"===e)continue;n[e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())]=t.dataset[e]}r.push(n)}else r=r.filter(e=>e.Model!==o);saveCompareList(a,r),updateCompareBar()},window.removeCompareItem=function(e){const t=getCurrentPageCategory();if(!t)return;let o=getCompareList(t);o=o.filter(t=>t.Model!==e),saveCompareList(t,o),updateCompareBar();const a=document.getElementById("compare-modal");a&&!a.classList.contains("hidden")&&(o.length<2?closeCompareModal():showCompareModal())},window.removeRowWithAnimation=function(e){const t=e.closest("tr");t&&(t.style.transition="all 0.3s ease-out",t.style.opacity="0",t.style.transform="translateX(-10px)",setTimeout(()=>t.remove(),300))},window.updateCompareBar=function(){const e=getCurrentPageCategory(),t=document.getElementById("compare-bar"),o=document.getElementById("compare-count"),a=document.getElementById("compare-now-btn"),r=document.getElementById("compare-items-preview");if(!e||!t)return void(t&&(t.classList.add("hidden"),t.classList.add("translate-y-full")));const n=getCompareList(e);document.querySelectorAll(".compare-checkbox").forEach(e=>{const t=e.closest("[data-model]");if(t){const o=t.dataset.model;e.checked=n.some(e=>e.Model===o)}}),n.length>0?(t.classList.remove("hidden"),setTimeout(()=>t.classList.remove("translate-y-full"),10)):(t.classList.add("translate-y-full"),setTimeout(()=>t.classList.add("hidden"),300)),o&&(o.textContent=n.length),r&&(r.innerHTML=n.map(e=>`\n            <span class="bg-gray-600 text-white text-xs font-semibold px-3 py-1.5 rounded-full flex items-center">\n                ${e.Model}\n                <button onclick="removeCompareItem('${e.Model}')" class="ml-2 hover:text-red-300 focus:outline-none font-bold" title="Remove">&times;</button>\n            </span>\n        `).join("")),a&&(a.disabled=n.length<2)},window.clearCompare=function(){const e=getCurrentPageCategory();e&&(saveCompareList(e,[]),document.querySelectorAll(".compare-checkbox").forEach(e=>e.checked=!1),updateCompareBar())},window.showCompareModal=function(){const e=getCurrentPageCategory();if(!e)return;const t=getCompareList(e);if(t.length<2)return;const o=document.getElementById("compare-modal"),a=document.getElementById("compare-modal-body");let r=[];t.forEach(e=>{Object.keys(e).forEach(e=>{"Model"===e||"Image"===e||"Category"===e||r.includes(e)||r.push(e)})});let n='\n        <div class="flex justify-end mb-2">\n            <button onclick="showCompareModal()" class="text-sm text-gray-500 hover:text-primary transition-colors flex items-center gap-1">\n                <i class="fa-solid fa-rotate-left"></i> Restore Hidden Rows\n            </button>\n        </div>\n        <div class="overflow-x-auto"><table class="w-full border-collapse text-left text-sm">';n+='<thead><tr><th class="p-3 border-b-2 border-gray-200 font-bold text-primary bg-gray-50">Feature</th>',t.forEach(e=>{n+=`<th class="p-3 border-b-2 border-gray-200 font-bold text-primary text-center bg-gray-50 relative">\n            <button onclick="removeCompareItem('${e.Model}')" class="absolute top-1 right-1 text-gray-400 hover:text-red-500 p-1" title="Remove">\n                <i class="fa-solid fa-circle-xmark text-lg"></i>\n            </button>\n            ${e.Image?`<img src="${e.Image}" class="h-16 mx-auto mb-2 object-contain">`:""}\n            <div class="mt-2">${e.Model}</div>\n        </th>`}),n+="</tr></thead><tbody>",r.forEach(e=>{n+=`<tr class="hover:bg-gray-50 even:bg-gray-50 group">\n            <td class="p-3 border-b border-gray-200 font-semibold text-gray-700 relative pl-8">\n                <button onclick="removeRowWithAnimation(this)" class="absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity" title="Remove Row">\n                    <i class="fa-solid fa-xmark"></i>\n                </button>\n                ${e}\n            </td>`,t.forEach(t=>{n+=`<td class="p-3 border-b border-gray-200 text-center text-gray-600">${t[e]||"-"}</td>`}),n+="</tr>"}),n+="</tbody></table></div>",a&&(a.innerHTML=n),o&&o.classList.remove("hidden")},window.closeCompareModal=function(){const e=document.getElementById("compare-modal");e&&e.classList.add("hidden")};